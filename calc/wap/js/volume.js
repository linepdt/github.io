var json = [
    {
        "symbol": "dm³",
        "ratio": 1,
        "ename": "liter",
        "name": "立方分米",
        "tname": "立方分米"
    },
    {
        "symbol": "cm³",
        "ratio": 0.001,
        "ename": "milliliter",
        "name": "立方厘米",
        "tname": "立方厘米"
    },
    {
        "symbol": "mm³",
        "ratio": 0.000001,
        "ename": "cubic millimeter",
        "name": "立方毫米",
        "tname": "立方毫米"
    },
    {
        "symbol": "L",
        "alias": "立方分米",
        "ratio": 1,
        "ename": "liter",
        "name": "升",
        "tname": "升"
    },
    {
        "symbol": "dL",
        "ratio": 0.1,
        "ename": "deciliter",
        "name": "分升",
        "tname": "分升"
    },
    {
        "symbol": "cL",
        "ratio": 0.01,
        "ename": "centiliter",
        "name": "厘升",
        "tname": "厘升"
    },
    {
        "symbol": "mL",
        "alias": "立方厘米",
        "ratio": 0.001,
        "ename": "milliliter",
        "name": "毫升",
        "tname": "毫升"
    },
    {
        "symbol": "hL",
        "alias": "百升",
        "ratio": 100,
        "ename": "hectoliter",
        "name": "公石",
        "tname": "公石"
    },
    {
        "symbol": "cu ft",
        "ratio": 28.316846592,
        "ename": "cubic foot",
        "name": "立方英尺",
        "tname": "立方英尺"
    },
    {
        "symbol": "cu in",
        "ratio": 0.016387064,
        "ename": "cubic inch",
        "name": "立方英寸",
        "tname": "立方英寸"
    },
    {
        "symbol": "cu yd",
        "ratio": 764.554857984,
        "ename": "cubic yard",
        "name": "立方码",
        "tname": "立方碼"
    },
    {
        "symbol": "",
        "ratio": 1233481.8375475,
        "ename": "acre foot",
        "name": "亩英尺",
        "tname": "畝英尺"
    },
    {
        "symbol": "UK gal",
        "ratio": 4.54609,
        "ename": "briGallon",
        "name": "英制加仑",
        "tname": "英制加侖"
    },
    {
        "symbol": "US gal",
        "ratio": 3.785411784,
        "ename": "uslGallon",
        "name": "美制加仑",
        "tname": "美製加侖"
    },
    {
        "symbol": "fl oz",
        "ratio": 0.0284130625,
        "ename": "briFluid ounce",
        "name": "英制液量盎司",
        "tname": "英制液量盎司"
    },
    {
        "symbol": "fl oz",
        "ratio": 0.0295735295625,
        "ename": "uslFluid ounce",
        "name": "美制液量盎司",
        "tname": "美製液量盎司"
    },
    {
        "symbol": "",
        "ratio": 158.987294928,
        "ename": "uslBarrel",
        "name": "美制液量桶",
        "tname": "美製液量桶"
    },
    {
        "symbol": "qt",
        "ratio": 0.946352946,
        "ename": "uslQuart",
        "name": "美制液量夸脱",
        "tname": "美製液量夸脫"
    },
    {
        "symbol": "pt",
        "ratio": 0.473176473,
        "ename": "uslPint",
        "name": "美制液量品脱",
        "tname": "美製液量品脫"
    },
    {
        "symbol": "gi",
        "ratio": 0.11829411825,
        "ename": "uslGill",
        "name": "及耳",
        "tname": "及耳"
    },
    {
        "symbol": "fl dr",
        "ratio": 0.0036966911953125,
        "ename": "uslFluid dram",
        "name": "液量打兰",
        "tname": "液量打蘭"
    },
    {
        "symbol": "min",
        "ratio": 4.8133999938965e-7,
        "ename": "uslMinim",
        "name": "量滴",
        "tname": "量滴"
    },
    {
        "symbol": "",
        "ratio": 115.627123584,
        "ename": "usdBarrel",
        "name": "美制干量桶",
        "tname": "美製幹量桶"
    },
    {
        "symbol": "bu",
        "ratio": 35.23907016688,
        "ename": "usdBushel",
        "name": "美制干量蒲式耳",
        "tname": "美製幹量蒲式耳"
    },
    {
        "symbol": "pk",
        "ratio": 8.80976754172,
        "ename": "usdPeck",
        "name": "美制干量配克",
        "tname": "美製幹量配克"
    },
    {
        "symbol": "qt",
        "ratio": 1.101220942715,
        "ename": "usdQuart",
        "name": "美制干量夸脱",
        "tname": "美製幹量夸脫"
    },
    {
        "symbol": "pt",
        "ratio": 0.5506104713575,
        "ename": "usdPint",
        "name": "美制干量品脱",
        "tname": "美製幹量品脫"
    },
    {
        "symbol": "c",
        "ratio": 0.2365882365,
        "ename": "uscCup",
        "name": "美制烹调杯",
        "tname": "美製烹調杯"
    },
    {
        "symbol": "Tbs",
        "ratio": 0.01478676478125,
        "ename": "uscTable spoon",
        "name": "美制烹调汤勺",
        "tname": "美製烹調湯勺"
    },
    {
        "symbol": "tsp",
        "ratio": 0.00492892159375,
        "ename": "uscTea spoon",
        "name": "美制烹调调羹",
        "tname": "美製烹調調羹"
    },
    {
        "symbol": "bbl",
        "ratio": 163.65924,
        "ename": "briBarrel",
        "name": "英制桶",
        "tname": "英製桶"
    },
    {
        "symbol": "",
        "ratio": 36.36872,
        "ename": "briBushel",
        "name": "英制蒲式耳",
        "tname": "英制蒲式耳"
    },
    {
        "symbol": "pt",
        "ratio": 0.56826125,
        "ename": "briPint",
        "name": "英制品脱",
        "tname": "英製品脫"
    },
    {
        "symbol": "Table spoon",
        "ratio": 0.015,
        "ename": "mcTable spoon",
        "name": "汤勺",
        "tname": "湯勺"
    },
    {
        "symbol": "Tea spoon",
        "ratio": 0.005,
        "ename": "mcTea spoon",
        "name": "调羹",
        "tname": "調羹"
    },
    {
        "symbol": "",
        "ratio": 10,
        "ename": "dekaliter",
        "name": "十升",
        "tname": "十升"
    }
];

var app = new Vue({
    el: '#app',
    data: {
        number: "",
        array: json,
        numArr: [],
        noChangeTarget: {}
    },
    methods: {
        toNonExponential: function (num) {
            var m = num.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);
            return num.toFixed(Math.max(0, (m[1] || '').length - m[2]));
        },
        num: function (numb) {
            var inputNum = numb;
            if (numb > 10000000 || numb < 0.0000001) {
                inputNum = numb.toLocaleString().split(",").join("")
            }
            if (inputNum.toString().length > 15) {
                if (inputNum.toString().match(/\./)) {
                    var tempArr = inputNum.toString().split(".");
                    if (tempArr[0].length >= 15) {
                        inputNum = Number(tempArr[0]);
                    } else {
                        var extra = 15 - tempArr[0].length;
                        var t = tempArr[1].split("");
                        t.splice(extra);
                        tempArr[1] = t.join("");
                        inputNum = Number(tempArr.join("."));
                    }
                }
            }
            if (!inputNum.toString().match(/\./)) {
                var returnNum = !inputNum.toString().match(/e/) ? inputNum.toString() : inputNum.toLocaleString().split(",").join("");
                if (returnNum.match(/e/)) {
                    return inputNum.toLocaleString().split(",").join("");
                } else {
                    return returnNum;
                }
            } else {
                return (this.toNonExponential(((inputNum * Math.pow(10, 14)).toFixed(1)) / Math.pow(10, 14))).toString()
            }
        },
        inputCheck(n) {
            n.target.value = n.target.value.replace(/[^\d\.]/ig, '')
            this.number = n.target.value.replace(/[^\d\.]/ig, '');
            n.target.value = n.target.value.replace(/[`~!@#$%^&*()_\-+=<>?:"{}|,\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/ig, "");
            this.number = n.target.value.replace(/[`~!@#$%^&*()_\-+=<>?:"{}|,\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘’，。、]/ig, "");
            if (n.data === "e") {
                n.target.value = n.target.value.replace(/e/ig, "");
                this.number = Number(n.target.value.replace(/e/ig, ""))
            } else {
                this.number = this.number ? this.number.replace(/[^\d\.]/ig, '') : "";
            }
            if (this.number) {
                if (this.number.toString().match(/\./)) {
                    var tempStr = this.number.toString();
                    var tempArr = tempStr.split(".");
                    if (tempArr[0].length >= 18) {
                        this.number = Number(tempArr[0]);
                    } else if (tempArr[1].length >= (18 - tempArr[0].length - 1)) {
                        var flag = 18 - tempArr[0].length - 1;
                        tempArr[1].split("").splice(flag);
                        this.number = Number(tempArr.join("."))
                    }
                } else {
                    if (this.number.length >= 18) {
                        var tempArr = this.number.toString().split("");
                        tempArr.splice(17);
                        this.number = parseInt(tempArr.join(""))
                    }
                }
            }
        },
        inputBottom(e, radio, ename) {
            e.target.value = e.target.value ? e.target.value.replace(/[^0-9\.]/ig, '') : "";
            if (e.target.value) {
                if (e.target.value.length > 15) {
                    if (e.target.value.match(/\./)) {
                        var tempArr = e.target.value.split(".");
                        if (tempArr[0].length >= 15) {
                            e.target.value = Number(tempArr[0]);
                        } else {
                            var extra = 15 - tempArr[0].length;
                            var t = tempArr[1].split("");
                            t.splice(extra);
                            tempArr[1] = t.join("");
                            e.target.value = tempArr.join(".");
                        }
                    } else {
                        if (e.target.value.length >= 15) {
                            var tempArr = e.target.value.split("");
                            tempArr.splice(15);
                            e.target.value = tempArr.join("")
                  cf      }
                    }
                }
                this.noChangeTarget.ename = ename;
                this.noChangeTarget.value = e.target.value;
                if ((e.target.value * radio).toString().match(/e/)) {
                    this.number = Number((e.target.value * radio).toLocaleString().split(",").join(""));
                } else {
                    this.number = Number(e.target.value * radio);
                }
                this.number = Number(e.target.value * radio);
            } else {
                this.noChangeTarget.value = "";
                this.number = "";
            }
        }
    },
})


